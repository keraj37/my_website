@using my_website.Models

@model ConsoleCommand

@{
    ViewBag.Title = "Console";
}

@Html.Partial("_ProjectsPartial")

<div>
    <section id="console">
        <div class="console multiline">
            ***Console project v0.0.1***
            <div id="console-output">
                @Model.Content
            </div>
        </div>
        <div>
            <input id="console-input" type="text" name="cmd" class="console" autofocus />
            <input id="execute" type="submit" value="Execute" class="console-button" />
        </div>
    </section>
</div>

@section Scripts
{
    <script type="text/javascript">
        $(document).ready(function () {
            $('#execute').click(function () {
                $.ajax({
                    type: "POST",
                    url: "/Projects/Console",
                    data: '{cmd: "' + $("#console-input").val() + '" }',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (response) {
                        $("#console-output").val(response.content);
                    },
                    failure: function (response) {
                        alert("Sorry, something went wrong");
                    },
                    error: function (response) {
                        alert("Sorry, something went wrong");
                    }
                });
            });
        });
    </script>
}

@if (Model.HasRedirection)
{
    <META HTTP-EQUIV="Refresh" CONTENT="1;URL=@(Url.Action(Model.RedirectToAction, "Projects"))">
}

